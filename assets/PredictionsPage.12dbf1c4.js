import{u as k,r as p,g as y,h as v,o as n,i as b,c as l,a as t,t as a,b as w,F as P,k as g,e as T,n as j}from"./index.1107b5b2.js";import{U as d}from"./env.6b4efaae.js";import{L as S}from"./Loader.91909d1b.js";import"./_plugin-vue_export-helper.cdc0426e.js";const $={key:1,class:"row mt-3"},x={class:"col-md-9"},B={class:"text-center"},C={class:"row"},E={class:"table bg-light"},L=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Partido"),t("th",{scope:"col"},"Resultado"),t("th",{scope:"col"},"Pronostico"),t("th",{scope:"col"},"Puntos")])],-1),N=["onClick"],F=t("i",{class:"fas fa-coins"},null,-1),I=[F],D=t("div",{class:"col-md-3"},"Publicidad",-1),H={__name:"PredictionsPage",setup(R){const i=k(),e=p([]),h=p(!0);y(()=>{u()});const u=async()=>{e.value=[];const o=await(await fetch(`${d}/api/predictions`,{headers:{token:i.state.token}})).json();console.log(o.list),o.status&&o.list.forEach(async s=>{const _=await(await fetch(`${d}/api/match/${s.id_match}`,{headers:{token:i.state.token}})).json();e.value.push({...s,info_match:_})}),h.value=!1},f=async(c,o,s,r)=>{await(await fetch(`${d}/setScore`,{headers:{"Content-Type":"application/json",token:i.state.token},body:JSON.stringify({real:c,predict:o,stage_match:s,id_match:r})})).json(),u()},m=v(()=>{let c=0;return e.value.forEach(o=>{c=c+o.pts}),c});return(c,o)=>h.value?(n(),b(S,{key:0})):(n(),l("div",$,[t("div",x,[t("h1",B,a(w(m))+" Puntos",1),t("div",C,[t("table",E,[L,t("tbody",null,[(n(!0),l(P,null,g(e.value,s=>(n(),l("tr",null,[t("td",null,a(s.info_match.homeTeam.name)+" vs "+a(s.info_match.awayTeam.name),1),t("td",null,a(s.info_match.score.fullTime.home||0)+" - "+a(s.info_match.score.fullTime.away||0),1),t("td",null,a(s.predict.home)+" - "+a(s.predict.away),1),t("td",null,[T(a(s.pts),1),t("button",{class:j(["btn btn-outline-primary ms-3",{disabled:s.info_match.status!=="FINISHED"}]),onClick:r=>f(s.info_match.score,s.predict,s.stage_match,s.id_match)},I,10,N)])]))),256))])])])]),D]))}};export{H as default};
